{"version":3,"file":"pdfjs-viewer.compress.js.map","sources":["pdfjs-viewer.js"],"sourcesContent":["/**\n   Copyright 2021 Carlos A. (https://github.com/dealfonso)\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\n(function (exports, $) {\n\t\"use strict\";\n\tif ($ === undefined) {\n\t\tconsole.error(\"jQuery-like library not available\");\n\t\treturn;\n\t}\n\tlet defaults = {\n\t\tvisibleThreshold: .5,\n\t\textraPagesToLoad: 3,\n\t\tpageClass: \"pdfpage\",\n\t\tcontentClass: \"content-wrapper\",\n\t\tonDocumentReady: () => {},\n\t\tonNewPage: (page, i) => {},\n\t\tonPageRender: (page, i) => {},\n\t\tzoomValues: [.25, .5, .75, 1, 1.25, 1.5, 2, 4, 8],\n\t\tonZoomChange: zoomlevel => {},\n\t\tonActivePageChanged: (page, i) => {},\n\t\tzoomFillArea: .95,\n\t\temptyContent: () => $('<div class=\"loader\"></div>'),\n\t\trenderingScale: 1.5\n\t};\n\tclass Zoomer {\n\t\tconstructor(viewer, options = {}) {\n\t\t\tlet defaults = {\n\t\t\t\tzoomValues: [.25, .5, .75, 1, 1.25, 1.5, 2, 4, 8],\n\t\t\t\tfillArea: .9\n\t\t\t};\n\t\t\tthis.current = 1;\n\t\t\tthis.viewer = viewer;\n\t\t\tthis.settings = Object.assign({}, defaults, options);\n\t\t\tthis.settings.zoomValues = this.settings.zoomValues.sort();\n\t\t}\n\t\tget(zoom = null) {\n\t\t\tif (zoom === null) {\n\t\t\t\treturn this.current;\n\t\t\t}\n\t\t\tif (parseFloat(zoom) == zoom) {\n\t\t\t\treturn zoom;\n\t\t\t}\n\t\t\tlet $activepage = this.viewer.getActivePage();\n\t\t\tlet zoomValues = [];\n\t\t\tswitch (zoom) {\n\t\t\tcase \"in\":\n\t\t\t\tzoom = this.current;\n\t\t\t\tzoomValues = this.settings.zoomValues.filter(x => x > zoom);\n\t\t\t\tif (zoomValues.length > 0) {\n\t\t\t\t\tzoom = Math.min(...zoomValues);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"out\":\n\t\t\t\tzoom = this.current;\n\t\t\t\tzoomValues = this.settings.zoomValues.filter(x => x < zoom);\n\t\t\t\tif (zoomValues.length > 0) {\n\t\t\t\t\tzoom = Math.max(...zoomValues);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"fit\":\n\t\t\t\tzoom = Math.min(this.get(\"width\"), this.get(\"height\"));\n\t\t\t\tbreak;\n\t\t\tcase \"width\":\n\t\t\t\tzoom = this.settings.fillArea * this.viewer.$container.width() / $activepage.data(\"width\");\n\t\t\t\tbreak;\n\t\t\tcase \"height\":\n\t\t\t\tzoom = this.settings.fillArea * this.viewer.$container.height() / $activepage.data(\"height\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tzoom = this.current;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn zoom;\n\t\t}\n\t\tzoomPages(zoom) {\n\t\t\tzoom = this.get(zoom);\n\t\t\tthis.viewer.getPages().forEach(function (page) {\n\t\t\t\tlet $page = page.$div;\n\t\t\t\tlet c_width = $page.data(\"width\");\n\t\t\t\tlet c_height = $page.data(\"height\");\n\t\t\t\t$page.width(c_width * zoom).height(c_height * zoom);\n\t\t\t\t$page.data(\"zoom\", zoom);\n\t\t\t\t$page.find(`.${this.viewer.settings.contentClass}`).width(c_width * zoom).height(c_height * zoom);\n\t\t\t}.bind(this));\n\t\t\tthis.current = zoom;\n\t\t}\n\t}\n\tclass PDFjsViewer {\n\t\tversion = \"2.0.0\";\n\t\tconstructor($container, options = {}) {\n\t\t\tthis.settings = Object.assign({}, defaults, options);\n\t\t\tthis._zoom = new Zoomer(this, {\n\t\t\t\tzoomValues: this.settings.zoomValues,\n\t\t\t\tfillArea: this.settings.zoomFillArea\n\t\t\t});\n\t\t\t$container = $($container);\n\t\t\tthis.$container = $container;\n\t\t\t$container.get(0)._pdfjsViewer = this;\n\t\t\tthis._setScrollListener();\n\t\t\tthis.pages = [];\n\t\t\tthis.pdf = null;\n\t\t\tthis._documentReady = false;\n\t\t}\n\t\tsetZoom(zoom) {\n\t\t\tlet container = this.$container.get(0);\n\t\t\tlet prevzoom = this._zoom.current;\n\t\t\tlet prevScroll = {\n\t\t\t\ttop: container.scrollTop,\n\t\t\t\tleft: container.scrollLeft\n\t\t\t};\n\t\t\tthis._zoom.zoomPages(zoom);\n\t\t\tcontainer.scrollLeft = prevScroll.left * this._zoom.current / prevzoom;\n\t\t\tcontainer.scrollTop = prevScroll.top * this._zoom.current / prevzoom;\n\t\t\tthis._visiblePages(true);\n\t\t\tif (this._documentReady) {\n\t\t\t\tif (typeof this.settings.onZoomChange === \"function\") this.settings.onZoomChange.call(this, this._zoom.current);\n\t\t\t\tthis.$container.get(0).dispatchEvent(new CustomEvent(\"zoomchange\", {\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\tzoom: this._zoom.current\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t\treturn this._zoom.current;\n\t\t}\n\t\tgetZoom() {\n\t\t\treturn this._zoom.current;\n\t\t}\n\t\t_cleanPage($page) {\n\t\t\tlet $emptyContent = this.settings.emptyContent();\n\t\t\t$page.find(`.${this.settings.contentClass}`).html(\"\").append($emptyContent);\n\t\t}\n\t\t_setPageContent($page, $content) {\n\t\t\t$page.find(`.${this.settings.contentClass}`).html(\"\").append($content);\n\t\t}\n\t\trefreshAll() {\n\t\t\tthis._visiblePages(true);\n\t\t}\n\t\t_setScrollListener() {\n\t\t\tlet scrollLock = false;\n\t\t\tlet scrollPos = {\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0\n\t\t\t};\n\t\t\tthis.__scrollHandler = function (e) {\n\t\t\t\tif (scrollLock === true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tscrollLock = true;\n\t\t\t\tlet container = this.$container.get(0);\n\t\t\t\tif (Math.abs(container.scrollTop - scrollPos.top) > container.clientHeight * .2 * this._zoom.current || Math.abs(container.scrollLeft - scrollPos.left) > container.clientWidth * .2 * this._zoom.current) {\n\t\t\t\t\tscrollPos = {\n\t\t\t\t\t\ttop: container.scrollTop,\n\t\t\t\t\t\tleft: container.scrollLeft\n\t\t\t\t\t};\n\t\t\t\t\tthis._visiblePages();\n\t\t\t\t}\n\t\t\t\tscrollLock = false;\n\t\t\t}.bind(this);\n\t\t\tthis.$container.off(\"scroll\");\n\t\t\tthis.$container.on(\"scroll\", this.__scrollHandler);\n\t\t}\n\t\t_createSkeleton(page, i) {\n\t\t\tlet pageinfo = {\n\t\t\t\t$div: null,\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t\tloaded: false\n\t\t\t};\n\t\t\tif (page.getViewport !== undefined) {\n\t\t\t\tlet viewport = page.getViewport({\n\t\t\t\t\trotation: this._rotation,\n\t\t\t\t\tscale: 1\n\t\t\t\t});\n\t\t\t\tpageinfo.width = viewport.width;\n\t\t\t\tpageinfo.height = viewport.height;\n\t\t\t\tpageinfo.loaded = true;\n\t\t\t} else {\n\t\t\t\tpageinfo.width = page.width;\n\t\t\t\tpageinfo.height = page.height;\n\t\t\t}\n\t\t\tconsole.assert(pageinfo.width > 0 && pageinfo.height > 0, \"Page width and height must be greater than 0\");\n\t\t\tpageinfo.$div = $(`<div id=\"page-${i}\">`).attr(\"data-page\", i).data(\"width\", pageinfo.width).data(\"height\", pageinfo.height).data(\"zoom\", this._zoom.current).addClass(this.settings.pageClass).width(pageinfo.width * this._zoom.current).height(pageinfo.height * this._zoom.current);\n\t\t\tlet $content = $(`<div class=\"${this.settings.contentClass}\">`).width(pageinfo.width).height(pageinfo.height);\n\t\t\tpageinfo.$div.append($content);\n\t\t\tthis._cleanPage(pageinfo.$div);\n\t\t\treturn pageinfo;\n\t\t}\n\t\t_placeSkeleton(pageinfo, i) {\n\t\t\tlet prevpage = i - 1;\n\t\t\tlet $prevpage = null;\n\t\t\twhile (prevpage > 0 && ($prevpage = this.$container.find(`.${this.settings.pageClass}[data-page=\"${prevpage}\"]`)).length === 0) {\n\t\t\t\tprevpage--;\n\t\t\t}\n\t\t\tif (prevpage === 0) {\n\t\t\t\tthis.$container.append(pageinfo.$div);\n\t\t\t} else {\n\t\t\t\t$prevpage.after(pageinfo.$div);\n\t\t\t}\n\t\t}\n\t\t_createSkeletons(pageinfo) {\n\t\t\tfor (let i = 1; i <= this.pageCount; i++) {\n\t\t\t\tif (this.pages[i] === undefined) {\n\t\t\t\t\tpageinfo = this._createSkeleton(pageinfo, i);\n\t\t\t\t\tthis.pages[i] = pageinfo;\n\t\t\t\t\tthis._placeSkeleton(pageinfo, i);\n\t\t\t\t\tif (typeof this.settings.onNewPage === \"function\") {\n\t\t\t\t\t\tthis.settings.onNewPage.call(this, pageinfo.$div.get(0), i);\n\t\t\t\t\t}\n\t\t\t\t\tthis.$container.get(0).dispatchEvent(new CustomEvent(\"newpage\", {\n\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\tpageNumber: i,\n\t\t\t\t\t\t\tpage: pageinfo.$div.get(0)\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_setActivePage(i) {\n\t\t\tif (this._activePage !== i) {\n\t\t\t\tthis._activePage = i;\n\t\t\t\tlet activePage = this.getActivePage();\n\t\t\t\tif (this._documentReady) {\n\t\t\t\t\tactivePage = activePage == null ? null : activePage.get(0);\n\t\t\t\t\tif (typeof this.settings.onActivePageChanged === \"function\") {\n\t\t\t\t\t\tthis.settings.onActivePageChanged.call(this, activePage, i);\n\t\t\t\t\t}\n\t\t\t\t\tthis.$container.get(0).dispatchEvent(new CustomEvent(\"activepagechanged\", {\n\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\tactivePageNumber: i,\n\t\t\t\t\t\t\tactivePage: activePage\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_areaOfPageVisible($page) {\n\t\t\tif ($page === undefined) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tlet c_offset = this.$container.offset();\n\t\t\tlet c_width = this.$container.width();\n\t\t\tlet c_height = this.$container.height();\n\t\t\tlet position = $page.offset();\n\t\t\tposition.top -= c_offset.top;\n\t\t\tposition.left -= c_offset.left;\n\t\t\tposition.bottom = position.top + $page.outerHeight();\n\t\t\tposition.right = position.left + $page.outerWidth();\n\t\t\tlet page_y0 = Math.min(Math.max(position.top, 0), c_height);\n\t\t\tlet page_y1 = Math.min(Math.max($page.outerHeight() + position.top, 0), c_height);\n\t\t\tlet page_x0 = Math.min(Math.max(position.left, 0), c_width);\n\t\t\tlet page_x1 = Math.min(Math.max($page.outerWidth() + position.left, 0), c_width);\n\t\t\tlet vis_x = page_x1 - page_x0;\n\t\t\tlet vis_y = page_y1 - page_y0;\n\t\t\treturn vis_x * vis_y;\n\t\t}\n\t\tisPageVisible(i) {\n\t\t\tif (this.pdf === null || i === undefined || i === null || i < 1 || i > this.pdf.numPages) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (typeof i === \"string\") {\n\t\t\t\ti = parseInt(i);\n\t\t\t}\n\t\t\tlet $page = i;\n\t\t\tif (typeof i === \"number\") {\n\t\t\t\tif (this.pages[i] === undefined) return false;\n\t\t\t\t$page = this.pages[i].$div;\n\t\t\t}\n\t\t\treturn this._areaOfPageVisible($page) > $page.outerWidth() * $page.outerHeight() * this.settings.visibleThreshold;\n\t\t}\n\t\t_visiblePages(forceRedraw = false) {\n\t\t\tlet max_area = 0;\n\t\t\tlet i_page = null;\n\t\t\tif (this.pages.length === 0) {\n\t\t\t\tthis._visibles = [];\n\t\t\t\tthis._setActivePage(0);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet $visibles = this.pages.filter(function (pageinfo) {\n\t\t\t\tlet areaVisible = this._areaOfPageVisible(pageinfo.$div);\n\t\t\t\tif (areaVisible > max_area) {\n\t\t\t\t\tmax_area = areaVisible;\n\t\t\t\t\ti_page = pageinfo.$div.data(\"page\");\n\t\t\t\t}\n\t\t\t\treturn areaVisible > 0;\n\t\t\t}.bind(this)).map(x => x.$div);\n\t\t\tthis._setActivePage(i_page);\n\t\t\tlet visibles = $visibles.map(x => {\n\t\t\t\treturn parseInt($(x).data(\"page\"));\n\t\t\t});\n\t\t\tif (visibles.length > 0) {\n\t\t\t\tlet minVisible = Math.min(...visibles);\n\t\t\t\tlet maxVisible = Math.max(...visibles);\n\t\t\t\tfor (let i = Math.max(1, minVisible - this.settings.extraPagesToLoad); i < minVisible; i++) {\n\t\t\t\t\tif (!visibles.includes(i)) visibles.push(i);\n\t\t\t\t}\n\t\t\t\tfor (let i = maxVisible + 1; i <= Math.min(maxVisible + this.settings.extraPagesToLoad, this.pdf.numPages); i++) {\n\t\t\t\t\tif (!visibles.includes(i)) visibles.push(i);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet nowVisibles = visibles;\n\t\t\tif (!forceRedraw) {\n\t\t\t\tnowVisibles = visibles.filter(function (x) {\n\t\t\t\t\treturn !this._visibles.includes(x);\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t\tthis._visibles.filter(function (x) {\n\t\t\t\treturn !visibles.includes(x);\n\t\t\t}).forEach(function (i) {\n\t\t\t\tthis._cleanPage(this.pages[i].$div);\n\t\t\t}.bind(this));\n\t\t\tthis._visibles = visibles;\n\t\t\tthis.loadPages(...nowVisibles);\n\t\t}\n\t\tloadPages(...pages) {\n\t\t\tthis._pagesLoading.push(...pages);\n\t\t\tif (this._loading) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._loadingTask();\n\t\t}\n\t\t_loadingTask() {\n\t\t\tthis._loading = true;\n\t\t\tif (this._pagesLoading.length > 0) {\n\t\t\t\tlet pagei = this._pagesLoading.shift();\n\t\t\t\tthis.pdf.getPage(pagei).then(function (page) {\n\t\t\t\t\tthis._renderPage(page, pagei);\n\t\t\t\t}.bind(this)).then(function (pageinfo) {\n\t\t\t\t\tif (this._pagesLoading.length > 0) {\n\t\t\t\t\t\tthis._loadingTask();\n\t\t\t\t\t}\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t\tthis._loading = false;\n\t\t}\n\t\tscrollToPage(i) {\n\t\t\tif (this.pages.length === 0 || this.pages[i] === undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet $page = this.pages[i].$div;\n\t\t\tif ($page.length === 0) {\n\t\t\t\tconsole.warn(`Page ${i} not found`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet position = $page.position();\n\t\t\tlet containerPosition = this.$container.position();\n\t\t\tif (position !== undefined) {\n\t\t\t\tthis.$container.get(0).scrollTop = this.$container.get(0).scrollTop + position.top - containerPosition.top;\n\t\t\t\tthis.$container.get(0).scrollLeft = this.$container.get(0).scrollLeft + position.left - containerPosition.left;\n\t\t\t}\n\t\t\tthis._setActivePage(i);\n\t\t}\n\t\t_renderPage(page, i) {\n\t\t\tlet pageinfo = this.pages[i];\n\t\t\tlet scale = this.settings.renderingScale;\n\t\t\tlet pixel_ratio = window.devicePixelRatio || 1;\n\t\t\tlet viewport = page.getViewport({\n\t\t\t\trotation: this._rotation,\n\t\t\t\tscale: this._zoom.current * scale\n\t\t\t});\n\t\t\tpageinfo.width = viewport.width / this._zoom.current / scale;\n\t\t\tpageinfo.height = viewport.height / this._zoom.current / scale;\n\t\t\tpageinfo.$div.data(\"width\", pageinfo.width);\n\t\t\tpageinfo.$div.data(\"height\", pageinfo.height);\n\t\t\tpageinfo.$div.width(pageinfo.width * this._zoom.current);\n\t\t\tpageinfo.$div.height(pageinfo.height * this._zoom.current);\n\t\t\tpageinfo.loaded = true;\n\t\t\tlet $canvas = $(\"<canvas></canvas>\");\n\t\t\tlet canvas = $canvas.get(0);\n\t\t\tlet context = canvas.getContext(\"2d\");\n\t\t\tcanvas.height = viewport.height * pixel_ratio;\n\t\t\tcanvas.width = viewport.width * pixel_ratio;\n\t\t\tcanvas.getContext(\"2d\");\n\t\t\tvar transform = pixel_ratio !== 1 ? [pixel_ratio, 0, 0, pixel_ratio, 0, 0] : null;\n\t\t\tvar renderContext = {\n\t\t\t\tcanvasContext: context,\n\t\t\t\tviewport: viewport,\n\t\t\t\ttransform: transform\n\t\t\t};\n\t\t\treturn page.render(renderContext).promise.then(function () {\n\t\t\t\tthis._setPageContent(pageinfo.$div, $canvas);\n\t\t\t\tif (this._documentReady) {\n\t\t\t\t\tif (typeof this.settings.onPageRender === \"function\") {\n\t\t\t\t\t\tthis.settings.onPageRender.call(this, pageinfo.$div.get(0), i);\n\t\t\t\t\t}\n\t\t\t\t\tthis.$container.get(0).dispatchEvent(new CustomEvent(\"pagerender\", {\n\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\tpageNumber: i,\n\t\t\t\t\t\t\tpage: pageinfo.$div.get(0)\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\treturn pageinfo;\n\t\t\t}.bind(this));\n\t\t}\n\t\tgetActivePage() {\n\t\t\tif (this._activePage === null || this.pdf === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (this._activePage < 1 || this._activePage > this.pdf.numPages) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this.pages[this._activePage].$div;\n\t\t}\n\t\tgetPages() {\n\t\t\treturn this.pages;\n\t\t}\n\t\tgetPageCount() {\n\t\t\tif (this.pdf === null) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn this.pdf.numPages;\n\t\t}\n\t\tnext() {\n\t\t\tif (this._activePage < this.pdf.numPages) {\n\t\t\t\tthis.scrollToPage(this._activePage + 1);\n\t\t\t}\n\t\t}\n\t\tprev() {\n\t\t\tif (this._activePage > 1) {\n\t\t\t\tthis.scrollToPage(this._activePage - 1);\n\t\t\t}\n\t\t}\n\t\tfirst() {\n\t\t\tif (this._activePage !== 1) {\n\t\t\t\tthis.scrollToPage(1);\n\t\t\t}\n\t\t}\n\t\tlast() {\n\t\t\tif (this.pdf === null) return;\n\t\t\tif (this._activePage !== this.pdf.numPages) {\n\t\t\t\tthis.scrollToPage(this.pdf.numPages);\n\t\t\t}\n\t\t}\n\t\trotate(deg, accumulate = false) {\n\t\t\tif (accumulate) {\n\t\t\t\tdeg = deg + this._rotation;\n\t\t\t}\n\t\t\tthis._rotation = deg;\n\t\t\tlet container = this.$container.get(0);\n\t\t\tlet prevScroll = {\n\t\t\t\ttop: container.scrollTop,\n\t\t\t\tleft: container.scrollLeft,\n\t\t\t\theight: container.scrollHeight,\n\t\t\t\twidth: container.scrollWidth\n\t\t\t};\n\t\t\treturn this.forceViewerInitialization().then(function () {\n\t\t\t\tlet newScroll = {\n\t\t\t\t\ttop: container.scrollTop,\n\t\t\t\t\tleft: container.scrollLeft,\n\t\t\t\t\theight: container.scrollHeight,\n\t\t\t\t\twidth: container.scrollWidth\n\t\t\t\t};\n\t\t\t\tcontainer.scrollTop = prevScroll.top * (newScroll.height / prevScroll.height);\n\t\t\t\tcontainer.scrollLeft = prevScroll.left * (newScroll.width / prevScroll.width);\n\t\t\t}.bind(this));\n\t\t}\n\t\tforceViewerInitialization() {\n\t\t\tthis.pages = [];\n\t\t\tthis.$container.find(`.${this.settings.pageClass}`).remove();\n\t\t\tthis._pagesLoading = [];\n\t\t\tthis._loading = false;\n\t\t\tthis._visibles = [];\n\t\t\tthis._activePage = null;\n\t\t\treturn this.pdf.getPage(1).then(function (page) {\n\t\t\t\tthis._createSkeletons(page);\n\t\t\t\tthis._visiblePages();\n\t\t\t\tthis._setActivePage(1);\n\t\t\t}.bind(this));\n\t\t}\n\t\tasync loadDocument(document) {\n\t\t\tthis._documentReady = false;\n\t\t\tthis.pages = [];\n\t\t\tthis.$container.find(`.${this.settings.pageClass}`).remove();\n\t\t\tthis.pdf = null;\n\t\t\tlet loadingTask = pdfjsLib.getDocument(document);\n\t\t\treturn loadingTask.promise.then(function (pdf) {\n\t\t\t\tthis.pdf = pdf;\n\t\t\t\tthis.pageCount = pdf.numPages;\n\t\t\t\tthis._rotation = 0;\n\t\t\t\treturn this.forceViewerInitialization();\n\t\t\t}.bind(this)).then(function () {\n\t\t\t\tif (typeof this.settings.onDocumentReady === \"function\") {\n\t\t\t\t\tthis.settings.onDocumentReady.call(this);\n\t\t\t\t}\n\t\t\t\tthis.$container.get(0).dispatchEvent(new CustomEvent(\"documentready\", {\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\tdocument: this.pdf\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\tthis._setActivePage(0);\n\t\t\t\tthis._documentReady = true;\n\t\t\t\tthis._setActivePage(1);\n\t\t\t}.bind(this));\n\t\t}\n\t}\n\n\tfunction recoverAttributes(target, attributeDefaults) {\n\t\tconst camelcaseToSnakecase = str => str.replace(/[A-Z]/g, letter => `-${letter.toLowerCase()}`);\n\t\tlet $target = $(target);\n\t\tlet result = {};\n\t\tif ($target.length > 0) {\n\t\t\t$target = $($target[0]);\n\t\t\tfor (let originalAttributeName in attributeDefaults) {\n\t\t\t\tlet attributeName = camelcaseToSnakecase(originalAttributeName);\n\t\t\t\tlet attributeValue = $target.attr(attributeName);\n\t\t\t\tif (attributeValue != null) {\n\t\t\t\t\tswitch (typeof attributeDefaults[originalAttributeName]) {\n\t\t\t\t\tcase \"float\":\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tattributeValue = parseFloat(attributeValue);\n\t\t\t\t\t\t} catch (_) {}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"number\":\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tattributeValue = parseInt(attributeValue);\n\t\t\t\t\t\t} catch (_) {}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\tlet functionString = attributeValue;\n\t\t\t\t\t\tattributeValue = function () {\n\t\t\t\t\t\t\teval(functionString);\n\t\t\t\t\t\t}.bind(target[0]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tresult[originalAttributeName] = attributeValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init(element) {\n\t\tlet options = recoverAttributes(element, Object.assign({\n\t\t\tpdfDocument: \"\",\n\t\t\tinitialZoom: \"\"\n\t\t}, defaults));\n\t\tif (options[\"pdfDocument\"] != null) {\n\t\t\tlet pdfViewer = new PDFjsViewer($(element), options);\n\t\t\tpdfViewer.loadDocument(options[\"pdfDocument\"]).then(function () {\n\t\t\t\tif (options[\"initialZoom\"] != null) {\n\t\t\t\t\tpdfViewer.setZoom(options[\"initialZoom\"]);\n\t\t\t\t}\n\t\t\t});\n\t\t\telement.get(0).pdfViewer = pdfViewer;\n\t\t}\n\t}\n\t$(function () {\n\t\t$(\".pdfjs-viewer\").each(function () {\n\t\t\tlet $viewer = $(this);\n\t\t\tinit($viewer);\n\t\t});\n\t});\n\texports.PDFjsViewer = PDFjsViewer;\n})(window, window._$ ?? window.jQuery ?? undefined);\n"],"names":["exports","$","undefined","console","error","let","defaults","visibleThreshold","extraPagesToLoad","pageClass","contentClass","onDocumentReady","onNewPage","page","i","onPageRender","zoomValues","onZoomChange","zoomlevel","onActivePageChanged","zoomFillArea","emptyContent","renderingScale","Zoomer","constructor","viewer","options","this","current","settings","Object","assign","fillArea","sort","get","zoom","parseFloat","$activepage","getActivePage","filter","x","length","Math","min","max","$container","width","data","height","zoomPages","getPages","forEach","$page","$div","c_width","c_height","find","bind","PDFjsViewer","version","_zoom","_pdfjsViewer","_setScrollListener","pages","pdf","_documentReady","setZoom","container","prevzoom","prevScroll","scrollTop","scrollLeft","_visiblePages","call","dispatchEvent","CustomEvent","detail","getZoom","_cleanPage","$emptyContent","html","append","_setPageContent","$content","refreshAll","scrollLock","scrollPos","top","left","__scrollHandler","e","abs","clientHeight","clientWidth","off","on","_createSkeleton","pageinfo","loaded","getViewport","viewport","rotation","_rotation","scale","assert","attr","addClass","_placeSkeleton","prevpage","$prevpage","after","_createSkeletons","pageCount","pageNumber","_setActivePage","_activePage","activePage","activePageNumber","_areaOfPageVisible","position","page_y0","page_y1","page_x0","c_offset","offset","bottom","outerHeight","right","outerWidth","isPageVisible","numPages","parseInt","forceRedraw","max_area","i_page","_visibles","$visibles","areaVisible","map","visibles","minVisible","maxVisible","includes","push","nowVisibles","loadPages","_pagesLoading","_loading","_loadingTask","pagei","shift","getPage","then","_renderPage","scrollToPage","containerPosition","warn","pixel_ratio","window","devicePixelRatio","$canvas","canvas","context","getContext","render","canvasContext","transform","promise","getPageCount","next","prev","first","last","rotate","deg","accumulate","scrollHeight","scrollWidth","forceViewerInitialization","newScroll","remove","loadDocument","document","pdfjsLib","getDocument","recoverAttributes","target","attributeDefaults","camelcaseToSnakecase","str","replace","letter","toLowerCase","$target","result","originalAttributeName","attributeName","attributeValue","_","functionString","eval","init","element","pdfDocument","initialZoom","pdfViewer","each","_$","jQuery"],"mappings":"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"}